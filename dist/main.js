(()=>{"use strict";class t{constructor(){this.canvas=document.getElementById("myCanvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.canvas.style.cursor="none"}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}}class s extends t{constructor(){super(),this.maxlenght=150,this.speed=7,this.centerX=this.canvas.width/2,this.centerY=this.canvas.height-40,this.route=Math.atan2(this.canvas.height/2-this.centerY,this.canvas.width/2-this.centerX),this.maxY=this.centerY+Math.sin(this.route)*this.maxlenght,this.maxX=this.centerX+Math.cos(this.route)*this.maxlenght}createStarter(){this.ctx.beginPath(),this.ctx.lineWidth=3,this.ctx.strokeStyle="black",this.ctx.setLineDash([12,15]),this.ctx.moveTo(this.centerX,this.centerY),this.ctx.lineTo(this.maxX,this.maxY),this.ctx.stroke(),this.ctx.closePath()}calcAngle(t){const s=Math.atan2(t.clientY-this.centerY,t.clientX-this.centerX);this.maxY=this.centerY+Math.sin(s)*this.maxlenght,this.maxX=this.centerX+Math.cos(s)*this.maxlenght}}class e extends t{constructor(t){super(t),this.posX=t.centerX,this.posY=t.centerY,this.routeX=t.routeX,this.ismoving=t.ismoving,this.ballRadius=25}drawBall(){this.ctx.beginPath(),this.ctx.arc(this.posX,this.posY,this.ballRadius,0,2*Math.PI),this.ctx.fillStyle="#0095DD",this.ctx.fill(),this.ctx.closePath()}push(t){this.posY+=Math.sin(t.route)*t.speed,this.posX+=Math.cos(t.route)*this.routeX*t.speed}correctPosY(t){const s=t;Math.floor(this.posY+Math.sin(t.route)*t.speed)===Math.floor(this.ballRadius)?(this.push(t),this.ismoving=!1):Math.floor(this.posY+Math.sin(t.route)*t.speed)<Math.floor(this.ballRadius)&&(s.speed-=.1,this.correctPosY(s))}checkMergerBalls(t,s){return s===t.balls.length?t.speed:(console.log(t.balls[s]),this.checkMergerBalls(t,s+=1))}pushing(t){t.speed=this.checkMergerBalls(t,0),(this.posX+Math.cos(t.route)*this.routeX*t.speed>=this.canvas.width-this.ballRadius||this.posX+Math.cos(t.route)*this.routeX*t.speed<=this.ballRadius)&&(this.routeX*=-1);for(let s=0;s<t.balls.length;s+=1){const e=Math.sqrt((this.posX+Math.cos(t.route)*this.routeX*t.speed-t.balls[s].posX)**2+(this.posY+Math.sin(t.route)*t.speed-t.balls[s].posY)**2);if(Math.floor(e)===Math.floor(this.ballRadius+t.balls[s].ballRadius)){this.ismoving=!1;break}}this.push(t),this.drawBall()}}const a=new class extends s{constructor(t){super(t),this.movingBall=new e({centerX:this.centerX,centerY:this.centerY,routeX:1,ismoving:!1}),this.countBalls=t.countBalls,this.balls=[]}addBall(){this.balls.push(this.movingBall),this.movingBall=new e({centerX:this.centerX,centerY:this.centerY,routeX:1,ismoving:!1}),this.createStarter(),this.reDrawBalls(),this.movingBall.drawBall()}reDrawBalls(){this.balls.forEach((t=>{t.drawBall()}))}}({countBalls:1});setInterval((()=>{const t={speed:a.speed,route:a.route,balls:a.balls};a.movingBall.correctPosY(t),a.movingBall.ismoving?(a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.reDrawBalls(),a.createStarter(),a.movingBall.pushing(t)):a.movingBall.posX!==a.centerX&&a.movingBall.posY!==a.centerY&&a.addBall()}),10),a.canvas.addEventListener("mousemove",(t=>{a.calcAngle(t),a.maxY<a.centerY&&(a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.movingBall.drawBall(),a.reDrawBalls(),a.createStarter(),a.movingBall.ismoving||a.movingBall.drawBall())}),!1),a.canvas.addEventListener("click",(t=>{a.movingBall.ismoving||(a.route=Math.atan2(t.clientY-a.centerY,t.clientX-a.centerX),a.movingBall.ismoving=!0)}),!1),window.addEventListener("resize",(()=>{a.ctx.clearRect(0,0,a.canvas.width,a.canvas.height),a.resizeCanvas(),a.createStarter(),a.reDrawBalls(),a.movingBall.drawBall()}),!1)})();