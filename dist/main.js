(()=>{"use strict";class t{constructor(){this.canvas=document.getElementById("myCanvas"),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.canvas.style.cursor="none"}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}}class s extends t{constructor(){super(),this.maxlenght=150,this.speed=7,this.centerX=this.canvas.width/2,this.centerY=this.canvas.height-40,this.route=Math.atan2(this.canvas.height/2-this.centerY,this.canvas.width/2-this.centerX),this.maxY=this.centerY+Math.sin(this.route)*this.maxlenght,this.maxX=this.centerX+Math.cos(this.route)*this.maxlenght}createStarter(){this.ctx.beginPath(),this.ctx.lineWidth=3,this.ctx.strokeStyle="black",this.ctx.setLineDash([12,15]),this.ctx.moveTo(this.centerX,this.centerY),this.ctx.lineTo(this.maxX,this.maxY),this.ctx.stroke(),this.ctx.closePath()}calcAngle(t){const s=Math.atan2(t.clientY-this.centerY,t.clientX-this.centerX);this.maxY=this.centerY+Math.sin(s)*this.maxlenght,this.maxX=this.centerX+Math.cos(s)*this.maxlenght}}class e extends t{constructor(t){super(t),this.posX=t.centerX,this.posY=t.centerY,this.routeX=t.routeX,this.ismoving=t.ismoving,this.ballRadius=25}drawBall(){this.ctx.beginPath(),this.ctx.arc(this.posX,this.posY,this.ballRadius,0,2*Math.PI),this.ctx.fillStyle="#0095DD",this.ctx.fill(),this.ctx.closePath()}push(t){this.posY+=Math.sin(t.route)*t.speed,this.posX+=Math.cos(t.route)*this.routeX*t.speed}correctPosY(t){const s=t;Math.floor(this.posY+Math.sin(t.route)*t.speed)===Math.floor(this.ballRadius)?(this.push(t),this.ismoving=!1):Math.floor(this.posY+Math.sin(t.route)*t.speed)<Math.floor(this.ballRadius)&&(s.speed-=.1,this.correctPosY(s))}getDistance(t,s){return Math.sqrt((this.posX+Math.cos(t.route)*this.routeX*t.speed-t.balls[s].posX)**2+(this.posY+Math.sin(t.route)*t.speed-t.balls[s].posY)**2)}checkMergerBalls(t,s,e){if(e){if(s===t.balls.length)return this.checkMergerBalls(t,0,!1);if(Math.floor(this.getDistance(t,s))<Math.floor(this.ballRadius+t.balls[s].ballRadius))return t.speed-=.1,this.checkMergerBalls(t,s,e)}else if(!e){if(s===t.balls.length)return t.speed;if(Math.floor(this.getDistance(t,s))===Math.floor(this.ballRadius+t.balls[s].ballRadius))return this.ismoving=!1,t.speed}return this.checkMergerBalls(t,s+=1,e)}pushing(t){t.balls.length>0&&(t.speed=this.checkMergerBalls(t,0,!0)),(this.posX+Math.cos(t.route)*this.routeX*t.speed>=this.canvas.width-this.ballRadius||this.posX+Math.cos(t.route)*this.routeX*t.speed<=this.ballRadius)&&(this.routeX*=-1),this.push(t),this.drawBall()}}const i=new class extends s{constructor(t){super(t),this.movingBall=new e({centerX:this.centerX,centerY:this.centerY,routeX:1,ismoving:!1}),this.countBalls=t.countBalls,this.balls=[]}addBall(){this.balls.push(this.movingBall),this.movingBall=new e({centerX:this.centerX,centerY:this.centerY,routeX:1,ismoving:!1}),this.createStarter(),this.reDrawBalls(),this.movingBall.drawBall()}reDrawBalls(){this.balls.forEach((t=>{t.drawBall()}))}}({countBalls:1});setInterval((()=>{const t={speed:i.speed,route:i.route,balls:i.balls};i.movingBall.correctPosY(t),i.movingBall.ismoving?(i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.reDrawBalls(),i.createStarter(),i.movingBall.pushing(t)):i.movingBall.posX!==i.centerX&&i.movingBall.posY!==i.centerY&&i.addBall()}),10),i.canvas.addEventListener("mousemove",(t=>{i.calcAngle(t),i.maxY<i.centerY&&(i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.movingBall.drawBall(),i.reDrawBalls(),i.createStarter(),i.movingBall.ismoving||i.movingBall.drawBall())}),!1),i.canvas.addEventListener("click",(t=>{i.movingBall.ismoving||(i.route=Math.atan2(t.clientY-i.centerY,t.clientX-i.centerX),i.movingBall.ismoving=!0)}),!1),window.addEventListener("resize",(()=>{i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height),i.resizeCanvas(),i.createStarter(),i.reDrawBalls(),i.movingBall.drawBall()}),!1)})();